# 2. `simple-md-wbs` 記法の書き方

`simple-md-wbs` は、Markdownの構文をベースにWBSを記述するためのシンプルな記法です。
詳細な定義は [**`simple-md-wbs` 記法 仕様書 (`../12_wbs_task_syntax_specification.md`)**](`../12_wbs_task_syntax_specification.md`) を必ず参照してください。

ここでは、主要なルールと記述例のポイントを抜粋して説明します。

## 2.1. 基本構造

* **階層:** `#`（H1）でプロジェクト名、`##`（H2）で大分類、`###`（H3）で中分類、`####`（H4）で小分類を記述します。タスクはこれらの下に `-` または `*` のリストアイテムとして記述します。
* **見出し後の空行:** 各見出し行（H1-H4）の直後には、**必ず1行の空行**を入れてください。

## 2.2. 属性の記述

各カテゴリ（見出し）とタスク（リストアイテム）は、属性情報を持つことができます。

### 2.2.1. カテゴリの属性（`%%`行）

* 見出し直後の空行の**次の行**に、`%%`（%%とスペース）で始めて、カンマ区切りで属性を記述します。
* **例（大分類）:**

    ```markdown
    ## D1_大分類A

    %% D1,2025-07-31,40,,,計画中,10%,PM田中,全体統括,2025-06-01,コメント
    ```

### 2.2.2. タスクの属性（HTMLコメント）

* タスク名の後に `スペース + <!-- 属性 -->` の形式で記述します。
* **例（タスク）:**

    ```markdown
    - タスク名 <!-- ID001,2025-08-15,5,先行,ID000,実施中,50%,担当X,チームY,2025-08-01,詳細コメント -->
    ```

### 2.2.3. 属性フィールドの順序と内容

属性フィールドの順序は固定です。詳細は仕様書の「3.3. 属性フィールド一覧と詳細」を参照してください。
主要なフィールドと順序は以下の通りです。

1. **ユーザー記述ID:**（必須）識別子。
2. **開始日（入力）**
3. **終了日（入力）**
4. **日数（入力）**
5. 関連タスク種別
6. 関連タスクID
7. **開始日（実績）**
8. **進捗率**
9. **担当者**
10. **担当組織**
11. **最終更新日**
12. **コメント**

* 属性を省略する場合は、カンマのみを残します（例: `ID001,,,,,状態X,,,,コメントY`）。

## 2.3. ユーザー記述IDの重要性

* 各カテゴリおよびタスクに付与する「ユーザー記述ID」は、**ファイル内でユニーク（一意）**にすることを強く推奨します。
* このIDは、タスク間の依存関係を指定する際に使用されます。IDが重複していると、意図しない依存関係が設定される可能性があります。
* 命名規則（例: `D01C01S01T01` のような階層的なID）を設けると管理しやすくなります。

## 2.4. 依存関係の記述

* 属性フィールドの「依存関係種別」に `"先行"` または `"後続"` を指定し、「先行タスクID」に依存先の「ユーザー記述ID」を記述します。

## 2.5. コメント

* 各属性行の最後のフィールド、およびHTMLコメント属性の最後のフィールドは、自由なコメントとして利用できます。カンマを含むことも可能です。

## 2.6. 記述サンプル

以下は、`simple-md-wbs` 記法で記述されたWBSのサンプルです。
このサンプルは、本仕様書で定義された見出しルール、属性行（`%%`）、タスク行のHTMLコメント属性の記述方法、および属性フィールドの順序（全12属性）にしたがっています。

```markdown
# プロジェクトX計画 <!-- 2.2. プロジェクト名（H1見出し）-->

<!-- 2.3. 見出し後の必須の空行 -->

## D1_要件定義フェーズ <!-- 2.2. 大分類（H2見出し）-->

<!-- 2.3. 見出し後の必須の空行 -->
%% D1,2025-06-01,2025-07-31,40,先行,PROJ_KICKOFF,2025-06-05,10%,PM田中,全体統括,2025-06-10,最重要フェーズ、リソース確保を優先 <!-- 3.1. カテゴリ属性行 -->
<!-- 属性順: UserDefinedId,開始日（入力）,終了日（入力）,日数（入力）,関連種別,関連ID,開始日（実績）,進捗率,担当者,担当組織,最終更新日,コメント -->

<!-- 2.3. 見出し後の必須の空行 -->
### D1C1_ヒアリング実施 <!-- 2.2. 中分類（H3見出し）-->

<!-- 2.3. 見出し後の必須の空行 -->
%% D1C1,2025-06-03,2025-06-30,20,,,2025-06-04,0%,佐藤リーダー,要件定義チーム,2025-06-05,顧客との日程調整が鍵

<!-- 2.3. 見出し後の必須の空行 -->
#### D1C1S1_A部署ヒアリング <!-- 2.2. 小分類（H4見出し）-->

<!-- 2.3. 見出し後の必須の空行 -->
%% D1C1S1,2025-06-10,2025-06-15,5,,,2025-06-11,,鈴木担当,要件定義チーム,2025-06-10,A部署の業務フローを詳細に把握する

- A部署ヒアリング準備 <!-- 2.2. タスク（リストアイテム）--> <!-- D1C1S1T1,2025-06-03,2025-06-07,2,,,2025-06-04,0%,鈴木担当,要件定義チーム,2025-06-03,質問票作成、アポ取り --> <!-- 3.2. タスク属性（HTMLコメント内）-->
- A部署ヒアリング実施と議事録作成 <!-- D1C1S1T2,2025-06-10,2025-06-15,3,先行,D1C1S1T1,2025-06-11,50%,鈴木担当,要件定義チーム,2025-06-12,議事録は翌日までに共有 -->

<!-- 2.3. 見出し後の必須の空行 -->
#### D1C1S2_B部署ヒアリング

<!-- 2.3. 見出し後の必須の空行 -->
%% D1C1S2,2025-06-20,2025-06-30,5,,,,高橋担当,要件定義チーム,2025-06-19,B部署は特にシステム連携が多い

- B部署ヒアリング準備 <!-- D1C1S2T1,2025-06-20,2025-06-24,2,,,0%,高橋担当,要件定義チーム,2025-06-20,A部署のヒアリング結果も参考に -->
- B部署ヒアリング実施と議事録作成 <!-- D1C1S2T2,2025-06-25,2025-06-30,3,先行,D1C1S2T1,,,高橋担当,要件定義チーム,2025-06-26, -->

--- <!-- 4. 無視される行の例（区切り線）-->
上記はヒアリング関連のタスクです。このテキスト行もツールに無視されます。 <!-- 4. 無視される行の例（自由記述）-->
---

<!-- 2.3. 見出し後の必須の空行 -->
### D1C2_要件定義書作成

<!-- 2.3. 見出し後の必須の空行 -->
%% D1C2,2025-07-01,2025-07-31,25,先行,D1C1,2025-07-02,0%,佐藤リーダー,要件定義チーム,2025-07-01,ヒアリング結果を元に作成開始

- 要件定義書ドラフト作成 <!-- D1C2T1,2025-07-01,2025-07-20,15,,,30%,渡辺担当,要件定義チーム,2025-07-05,複数名で分担執筆 -->
- 社内レビュー <!-- D1C2T2,2025-07-21,2025-07-25,3,先行,D1C2T1,,,,要件定義チーム,2025-07-22,関係各部署へレビュー依頼 -->
- 要件定義書FIX <!-- D1C2T3,2025-07-28,2025-07-31,2,先行,D1C2T2,,,,佐藤リーダー,要件定義チーム,2025-07-29,最終承認を得る -->

<!-- 2.3. 見出し後の必須の空行 -->
## D2_設計フェーズ

<!-- 2.3. 見出し後の必須の空行 -->
%% D2,2025-08-01,2025-09-30,40,先行,D1,,0%,PM田中,全体統括,2025-08-01,要件定義FIX後に開始

<!-- 2.3. 見出し後の必須の空行 -->
### D2C1_基本設計

<!-- 2.3. 見出し後の必須の空行 -->
%% D2C1,2025-08-01,2025-08-31,20,,,,設計チーム,2025-08-02,

- 基本設計書作成 <!-- D2C1T1,,,,,,,,設計チーム,,,基本設計は特に重要、時間をかける --> <!-- 属性を大幅に省略した例 -->
- 基本設計レビュー <!-- D2C1T2,,,,,先行,D2C1T1,,,,設計チーム,,, -->
    <!-- HTMLコメントの属性が不正な場合の例。ツールはこのタスクの属性をNULL扱いする想定 -->
    <!-- D2C1T2-invalid-comment-format -->


<!-- 2.3. 見出し後の必須の空行 -->
### D2C2_詳細設計

<!-- 2.3. 見出し後の必須の空行 -->
%% D2C2,2025-09-01,2025-09-30,20,先行,D2C1,,,,設計チーム,2025-09-01,

- 詳細設計タスクA <!-- D2C2T1,2025-09-01,2025-09-15,10,,,,,,, -->
- 詳細設計タスクB <!-- D2C2T2,2025-09-16,2025-09-30,10,先行,D2C2T1,,,,,,,先行タスクIDが存在しない場合の例（仮にD2C2T1が存在しない場合）-->

<!-- この最終行のコメントもツールに無視される -->
````
